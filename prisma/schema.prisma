datasource db {
  provider = "postgresql"
  url      = env("APP_DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  previewFeatures = ["filterJson", "extendedIndexes"]
}

model User {
  id                  String   @id @default(uuid())
  data                Json?  
}

model Project {
  id                  String   @id @default(uuid())
  data                Json?
}


model DerivedData {
  id                  String   @id @default(uuid())
  data                Json?
}


model State {
  id                  String   @id @default(uuid())
  data                Json?
}


model Channel {
  docId               String
  name                String
  Access              Access[]

  @@unique([docId, name], name: "Channel_docId_name_key")
  @@index([docId], type: Hash)
  @@id(name)
}


model Access {
  id                  String   @id @default(uuid())
  userId              String
  channel             Channel  @relation(fields: [channelName], references: [name])
  channelName         String

  @@unique([userId, channelName], name: "Access_userId_channelName_key")
  @@index([channelName], type: Hash)
  @@index([userId], type: Hash)
}